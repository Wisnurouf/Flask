{% extends "layout.html" %}
{% block content %}
<div class="p-4 max-w-7xl mx-auto" x-data="{ showModal: false, modalImage: '' }">
  <h1 class="text-2xl font-semibold text-gray-700 mb-6">Galeri Gambar</h1>

  {% if foto_rows %}
  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
    {% for foto in foto_rows %}
    <div class="bg-white rounded-xl shadow-md p-3 cursor-pointer" @click="modalImage='{{ url_for('static', filename='gambar/' + foto.img) }}'; showModal=true">
      <img src="{{ url_for('static', filename='gambar/' + foto.img) }}" alt="Foto" class="w-full h-56 object-cover rounded">
      <div class="mt-3 text-sm text-gray-700">
        <p><strong>Waktu:</strong> {{ foto.waktu.strftime('%Y-%m-%d %H:%M:%S') }}</p>
        <p><strong>Pola Gerakan:</strong> {{ foto.keterangan or '-' }}</p>
      </div>
    </div>
    {% endfor %}
  </div>

  <!-- Modal Gambar -->
  <div x-show="showModal" x-transition class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50">
    <div class="relative max-w-4xl w-full mx-4">
      <button class="absolute top-2 right-2 text-white text-2xl font-bold" @click="showModal = false">&times;</button>
      <img :src="modalImage" alt="Detail Gambar" class="w-full max-h-[90vh] object-contain rounded-xl shadow-lg">
    </div>
  </div>

  {% else %}
  <p class="text-gray-500">Belum ada gambar yang diunggah.</p>
  {% endif %}
</div>

<!-- Tambahkan Alpine.js (sekali saja jika belum ada di layout.html) -->
<script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
{% endblock %}
